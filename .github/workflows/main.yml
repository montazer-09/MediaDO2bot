name: ğŸ¤– Telegram Bot

on:
  # ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 5 Ø³Ø§Ø¹Ø§Øª Ùˆ50 Ø¯Ù‚ÙŠÙ‚Ø© (Ù‚Ø¨Ù„ Ø­Ø¯ Ø§Ù„Ù€ 6 Ø³Ø§Ø¹Ø§Øª)
  schedule:
    - cron: '0 */5 * * *'
  # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ Ù…Ù† GitHub
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 350  # Ø£Ù‚Ù„ Ù…Ù† 6 Ø³Ø§Ø¹Ø§Øª

    steps:
      # Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
      - name: ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
        uses: actions/checkout@v4

      # Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ«Ø¨ÙŠØª Python
      - name: ğŸ ØªØ«Ø¨ÙŠØª Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # Ø§Ù„Ø®Ø·ÙˆØ© 3: ØªØ«Ø¨ÙŠØª ffmpeg
      - name: ğŸ¬ ØªØ«Ø¨ÙŠØª ffmpeg
        run: sudo apt-get install -y ffmpeg

      # Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
        run: pip install -r requirements.txt

      # Ø§Ù„Ø®Ø·ÙˆØ© 5: ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
      - name: ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
        env:
          BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          ADMIN_ID: ${{ secrets.ADMIN_ID }}
          CHANNEL_ID: ${{ secrets.CHANNEL_ID }}
          CHANNEL_LINK: ${{ secrets.CHANNEL_LINK }}
          SMARTLINK: ${{ secrets.SMARTLINK }}
        run: python bot.py
        
